{% extends "base.html" %}

{% block title %}ContractViz - Sequence BioLab Analytics{% endblock %}

{% block extra_head %}
<style>
    /* Override page-container for fullscreen contractviz */
    .page-container {
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
        height: 100vh;
        display: flex;
        flex-direction: column;
    }
    
    .page-header {
        display: none; /* Hide header for fullscreen */
    }
    
    .content-wrapper {
        background: transparent !important;
        border-radius: 0 !important;
        padding: 0 !important;
        border: none !important;
        flex: 1;
        width: 100%;
        height: 100%;
        overflow: hidden;
    }
    
    .contractviz-wrapper {
        width: 100%;
        height: 100%;
        position: relative;
    }
    
    .contractviz-iframe {
        width: 100%;
        height: 100%;
        border: none;
        display: block;
    }
    
    .contractviz-loading {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: var(--text-secondary);
    }
</style>
{% endblock %}

{% block content %}
<div class="page-container">
    <div class="page-header">
        <h1>ContractViz</h1>
        <p class="page-subtitle">Contract Analysis & Value Visualization</p>
    </div>

    <div class="content-wrapper">
        <div class="contractviz-wrapper">
            <iframe 
                id="contractviz-iframe"
                class="contractviz-iframe" 
                src="{{ contractviz_url }}"
                allowfullscreen
                loading="lazy">
                <div class="contractviz-loading">
                    <p>Loading contract visualization...</p>
                </div>
            </iframe>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script>
    // Handle iframe loading
    const iframe = document.getElementById('contractviz-iframe');
    
    iframe.addEventListener('load', function() {
        console.log('ContractViz webapp loaded successfully');
    });
    
    iframe.addEventListener('error', function() {
        console.error('Failed to load ContractViz webapp');
    });
</script>
{% endblock %}
